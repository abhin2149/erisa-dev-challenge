{% load humanize %}
{% for claim in claims %}
<tr hx-get="{% url 'claims:claim_detail' claim.id %}" 
    hx-target="#claim-detail-container"
    style="cursor: pointer;">
    <td>
        <strong class="text-primary">#{{ claim.id }}</strong>
    </td>
    <td>{{ claim.patient_name }}</td>
    <td class="text-end">${{ claim.billed_amount|floatformat:2|intcomma }}</td>
    <td class="text-end">${{ claim.paid_amount|floatformat:2|intcomma }}</td>
    <td>
        {% if claim.status == 'Paid' %}
            <span class="badge status-paid claim-status">
                {{ claim.status }}
            </span>
        {% elif claim.status == 'Denied' %}
            <span class="badge status-denied claim-status">
                {{ claim.status }}
            </span>
        {% else %}
            <span class="badge status-under-review claim-status">
                {{ claim.status }}
            </span>
        {% endif %}
    </td>
    <td>{{ claim.insurer_name }}</td>
    <td>{{ claim.discharge_date|date:"M j, Y" }}</td>
    <td>
        {% if claim.flags.exists %}
            <span class="badge bg-danger">
                {{ claim.flags.count }}
            </span>
        {% else %}
            <span class="text-muted">-</span>
        {% endif %}
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="8" class="text-center text-muted py-4">
                        <div class="mt-2">No claims found matching your criteria.</div>
    </td>
</tr>
{% endfor %}
