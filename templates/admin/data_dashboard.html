{% extends "base.html" %}
{% load i18n static %}

{% block title %}{{ title }} - Claims Management System{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <!-- Main Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-lg border-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body text-white p-4">
                    <h1 class="card-title h2 mb-3">
                        <i class="bi bi-database-gear"></i>
                        Claims Data Management Dashboard
                    </h1>
                    <p class="card-text fs-5 mb-4 opacity-90">
                        Upload new claims data, export existing data, and manage your claims database with powerful import/export tools.
                    </p>
                    
                    <div class="d-flex flex-wrap gap-3">
                        <a href="{% url 'data_admin_upload' %}" class="btn btn-light btn-lg">
                            <i class="bi bi-upload"></i> Upload Claims Data
                        </a>
                        <a href="{% url 'data_admin_export' %}?format=json" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-download"></i> Export JSON
                        </a>
                        <a href="{% url 'data_admin_export' %}?format=csv" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-file-earmark-csv"></i> Export CSV
                        </a>
                        <a href="/admin/" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-gear"></i> Django Admin
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Start Guide -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow border-0">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title h4 mb-0">
                        <i class="bi bi-rocket-takeoff"></i>
                        Quick Start Guide
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-upload text-success me-2"></i>
                                    <strong>Upload Data:</strong> Support for CSV (pipe-delimited) and JSON formats
                                </li>
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-arrow-repeat text-info me-2"></i>
                                    <strong>Two Modes:</strong> Add new data or overwrite existing data
                                </li>
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-shield-check text-warning me-2"></i>
                                    <strong>File Validation:</strong> Automatic format checking and error reporting
                                </li>
                            </ul>
                        </div>
                        <div class="col-lg-6">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-download text-primary me-2"></i>
                                    <strong>Export Options:</strong> Download your data in JSON or CSV format
                                </li>
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-file-text text-secondary me-2"></i>
                                    <strong>Sample Files:</strong> Use provided sample files to test functionality
                                </li>
                                <li class="list-group-item border-0 px-0">
                                    <i class="bi bi-lock text-danger me-2"></i>
                                    <strong>Secure Processing:</strong> File size limits and validation for safety
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Current Statistics -->
    <div class="row mb-4">
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card shadow border-0 h-100">
                <div class="card-body text-center">
                    <div class="display-6 fw-bold text-primary mb-2">{{ claims_count }}</div>
                    <h6 class="card-title text-muted text-uppercase">Total Claims</h6>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card shadow border-0 h-100">
                <div class="card-body text-center">
                    <div class="display-6 fw-bold text-success mb-2">{{ details_count }}</div>
                    <h6 class="card-title text-muted text-uppercase">Claim Details</h6>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card shadow border-0 h-100">
                <div class="card-body text-center">
                    <div class="display-6 fw-bold text-warning mb-2">{{ flags_count }}</div>
                    <h6 class="card-title text-muted text-uppercase">Flags</h6>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card shadow border-0 h-100">
                <div class="card-body text-center">
                    <div class="display-6 fw-bold text-info mb-2">{{ notes_count }}</div>
                    <h6 class="card-title text-muted text-uppercase">Notes</h6>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow border-0">
                <div class="card-header bg-light">
                    <h3 class="card-title h5 mb-0">
                        <i class="bi bi-lightning"></i>
                        Quick Actions
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-lg-3 col-md-6">
                            <a href="{% url 'data_admin_upload' %}" class="btn btn-success w-100 d-flex align-items-center justify-content-center">
                                <i class="bi bi-plus-circle me-2"></i>
                                Upload New Data
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="{% url 'data_admin_export' %}?format=json" class="btn btn-info w-100 d-flex align-items-center justify-content-center">
                                <i class="bi bi-download me-2"></i>
                                Export All Data
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="/admin/claims/claim/" class="btn btn-secondary w-100 d-flex align-items-center justify-content-center">
                                <i class="bi bi-gear me-2"></i>
                                Manage Claims
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="/claims/" class="btn btn-primary w-100 d-flex align-items-center justify-content-center">
                                <i class="bi bi-list-ul me-2"></i>
                                Claims Interface
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- File Format Examples -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow border-0">
                <div class="card-header bg-warning text-dark">
                    <h3 class="card-title h5 mb-0">
                        <i class="bi bi-file-code"></i>
                        Supported File Formats
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <h5 class="text-primary">CSV Format (pipe-delimited)</h5>
                            <pre class="bg-light p-3 rounded border"><code>id|patient_name|billed_amount|paid_amount|status|insurer_name|discharge_date
99001|John Doe|15000.50|12000.00|Paid|Blue Cross|2025-01-15</code></pre>
                        </div>
                        <div class="col-lg-6">
                            <h5 class="text-success">JSON Format</h5>
                            <pre class="bg-light p-3 rounded border"><code>[{
  "id": 99001,
  "patient_name": "John Doe",
  "billed_amount": "15000.50",
  "paid_amount": "12000.00",
  "status": "Paid",
  "insurer_name": "Blue Cross",
  "discharge_date": "2025-01-15"
}]</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
